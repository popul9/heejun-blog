---
import { type CollectionEntry, getCollection, render } from "astro:content";
import BlogPost from "../../../layouts/BlogPost.astro";

export async function getStaticPaths() {
    const posts = await getCollection("developer");
    const chPosts = posts.filter(
        (post) => post.id.endsWith("/ch") || !post.id.includes("/")
    );
    return chPosts.map((post) => {
        const basePath = post.id.replace(/\/ch$/, "");
        return {
            params: { slug: basePath.toLowerCase() },
            props: post,
        };
    });
}
type Props = CollectionEntry<"developer">;

const post = Astro.props;
const { Content } = await render(post);
---

<BlogPost {...post.data}>
    <Content />
</BlogPost>
